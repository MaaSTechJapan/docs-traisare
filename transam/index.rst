###############
Viewer Fuctions
###############
TraISAREが保有するデータを可視化するビュワーについて定義する。

TranSAM
-------
Viewerの目的は、TraISAREの保有するデータを用いて、公共交通データを可視化することである。
可視化とは以下のような状態を指す。

* 取得したPOI(Point Of Interest)や, POI毎の属性情報が地図上にグラフ、表とともに可視化される
* 交通による旅客流動が交通モード、ユーザ属性とともに地図上に可視化される

このような可視化を実現するViewerがTranSAMである。

Requirement Definition
----------------------
TranSAMが実現する要件を以下に定義する。

* Transportation Demand Point Map

  * 移動需要目的地を示す地図

* Summary Dashboard at Demand Point
  
  * 移動需要目的地における、人員の時系列推移を示すダッシュボード

* Transportation Demand Generated Point Map

  * 移動需要目的地に対する移動需要が発生した起点をを示す地図

* Isochrone map on Demand Point
    
  * 移動需要目的地への等時線

Functional Requirement
----------------------
* 地図をベースにし、TraISAREが保有するデータを次に示すような状態で表示する。

  * 地図上へPOIを表示する
  * POIの属性情報を表示する
  * POI同士のトポロジーを表示する
  * トポロジーの属性情報を表示する
  * トポロジー上を移動する交通流動を動的に表示する
  
* 地図を含めた各種チャートを組み合わせ、ダッシュボード作成し、表示する。
* 地図をベースにTraISAREのPOIやトポロジーデータを追加・編集する。
* 地図に表示されたデータを使って、ユーザがパラメータを入力することにより、シミュレーションを実施できる


Non-functional Requirement
--------------------------
TranSAMはローカル環境で動作し、リモートサーバに配置されたデータを閲覧する。
TraISAREの扱うデータはビッグデータを含むため、データ単体が数十～数百GBとなる。
このサイズのデータはブラウザ上では扱うことができず、レコード数の制限等を設定してデータ量を減らすことが必要であるが、この制限により必要なデータを閲覧できなくなる問題がある。
このようなデータ制約を排除してデータを取り扱うことができるよう、TranSAMはブラウザベースではなく、ローカル環境での動作を前提とする。

Who uses TranSAM?
-----------------
TranSAMの利用者は、MaaSオペレータである。
MaaSオペレータとは、交通事業者ではなく、交通事業者の実体を把握し、将来の公共交通を設計する立場にある地方公共団体である。
日本国内では少子化による人口減に伴い、公共交通事業者の収入は長期的に見て減少する。
営利事業として継続が難しくなった公共交通に対しては、地方公共団体が補助金制度を設け、住民が必要な生活交通を維持している。
こうして補助金漬けになった事業者は業務改善、事業再編に対するモチベーションがなくなるため、旧態依然の事業形態のまま、さらに補助金を要求するという悪循環が生じている。
このため地方公共団体は、補助金を旧態依然の公共交通に拠出するのではなく、より効率的な公共交通を作るために使用したいと考えている。
より効率的な公共交通を作るためには、

#. 現状の交通動態を把握
#. 現状を分析
#. 将来の交通形態を立案
#. 立案した交通計画を元に関係者と調整
#. 計画を実行

というプロセスが必要になるが、実態は1.において交通動態を把握できる計測データが散逸、電子化ができていない状況である。
そのため、後続プロセスが計測データに基づかない推測ベースの計画となっている。
また計画が計測データに基づかないために説得力がなく、関係者調整や計画実行が難航しているという問題がある。
そのため、計画立案のための現状把握、分析ツールが望まれている。

User Pain and Requirements
--------------------------
MaaSオペレータが求めていることは、課題が何かを抽出できることである。
現状の交通動態データだけから把握できる課題もあるが、最も簡単なことは計画を定めておいて、それに対して差分があるかどうかを調べることである。
一方で、何もないところからは計画を立てることはできないので、計画の素となる情報をMaaSオペレータに与えてやる必要がある。
公共交通を営利事業として考えるならば、以下のような地点を可視化してやる必要がある。

* 自家用車移動において目的地とされやすい場所
* 公共交通機関において降車が多い場所
* 滞在人口を見たときに、人口変化が大きい場所

これらの場所は滞在人口変化が大きい場所なので、移動している人が多い場所とみなせる。
つまり、何かしらの移動手段を求めている人がいる場所(以下拠点と呼ぶ)となるので、ここに公共交通機関を整備してやることは有効であると思われる。
公共交通機関はこれら場所に他の場所から人を運ぶことが仕事であるので、次にこれらの人がどこから来たかを知る必要がある。
自家用車利用であれば出発地、公共交通機関であれば乗車地点の情報が取得できるので、拠点への流入出手段と要した時間を可視化する。
以上により、計画の素となるデータをMaaSオペレータに提供できると考えられる。
MaaSオペレータはこれらの情報に従い、鉄道路線を引く、バスを廃止する、道路を縮小するなどの計画を立てることができる。
立てた計画を元にMaaSオペレータは関係者と調整し、計画が実施される。
立てた計画が正しかったかどうかを計画実施者は確認し、次の計画に生かさなければならないので、計画と実績の差分を把握できるようにしなければならない。
把握する指標は計画立案時と同様の指標であり、その変化量が見えるようにする。
各指標は計画実行とともに変化するが、実績として計測できるのは通常半年～1年以上先であるので、その間のデータを蓄積し、経時変化をみることができるシステムを構築しておくことが必要である。

